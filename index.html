<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OBITO IOS TEAM</title>
  <style>
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:#000;
      color:#fff;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
    }
    .box{
      width:95%;max-width:400px;padding:20px;
      background:rgba(0,0,0,.7);border-radius:12px;
      border:1px solid rgba(0,255,153,.3);
      box-shadow:0 0 20px rgba(0,255,153,.3);
      text-align:center;
    }
    h2{margin:0 0 10px}
    input{
      width:100%;padding:12px;margin:8px 0;
      border-radius:8px;border:1px solid #333;
      background:#111;color:#fff;
    }
    button{
      width:100%;padding:12px;margin-top:10px;
      border:none;border-radius:8px;
      background:#00ff66;color:#000;font-weight:700;cursor:pointer;
    }
    #status{margin-top:10px;font-size:14px;min-height:18px}
    /* SHOP */
    .shop-fab{
      position:fixed;right:16px;bottom:16px;
      width:56px;height:56px;border-radius:50%;border:none;
      background:#00ff66;color:#000;font-size:22px;font-weight:800;
      box-shadow:0 0 20px rgba(0,255,153,.5);
      cursor:pointer;
    }
    .shop-panel{
      position:fixed;right:12px;bottom:84px;width:300px;
      background:rgba(0,0,0,.95);color:#fff;
      border:1px solid rgba(0,255,153,.25);border-radius:12px;
      box-shadow:0 0 30px rgba(0,0,0,.6);
      display:none;z-index:999;
    }
    .shop-panel.open{display:block}
    .shop-head{display:flex;justify-content:space-between;align-items:center;padding:10px}
    .shop-body{padding:10px}
    .chip{display:inline-block;margin:5px;padding:6px 10px;border:1px dashed #0f6;border-radius:12px;cursor:pointer}
    .card{margin-top:10px;padding:10px;background:#111;border-radius:8px;border:1px solid #222}
    .card ul{margin:5px 0 0 18px;padding:0;text-align:left}
    .links{display:flex;gap:8px;margin-top:8px}
    .links a{flex:1;text-align:center;text-decoration:none;padding:8px;border-radius:8px;background:#0f6;color:#000;font-weight:600}
  </style>
</head>
<body>
  <div class="box">
    <h2>ƒêƒÉng nh·∫≠p key</h2>
    <p>ADMIN: NhismDev</p>
    <input id="keyInput" type="text" placeholder="Nh·∫≠p key c·ªßa b·∫°n...">
    <button onclick="login()">ƒêƒÉng nh·∫≠p</button>
    <div id="status"></div>
  </div>

  <!-- SHOP -->
  <button id="shopFab" class="shop-fab">üõí</button>
  <div id="shopPanel" class="shop-panel">
    <div class="shop-head">
      <span>B·∫£ng gi√°</span>
      <button id="shopClose">‚úï</button>
    </div>
    <div class="shop-body">
      <div class="card">
        <ul>
          <li>10.000 VNƒê ‚Äî 1 Ng√†y</li>
          <li>50.000 VNƒê ‚Äî 7 Ng√†y</li>
          <li>150.000 VNƒê ‚Äî 30 Ng√†y</li>
          <li>250.000 VNƒê ‚Äî Vƒ©nh vi·ªÖn</li>
        </ul>
      </div>
      <div class="card">
        <b>Mua key ngay:</b>
        <div class="links">
          <a href="https://discord.com/users/your-id" target="_blank">Inbox Discord</a>
          <a href="https://vncheat.com/ticket" target="_blank">T·∫°o ticket</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ===== SHOP toggle ===== */
    const fab=document.getElementById('shopFab');
    const panel=document.getElementById('shopPanel');
    const close=document.getElementById('shopClose');
    fab.onclick=()=>panel.classList.add('open');
    close.onclick=()=>panel.classList.remove('open');

    /* ====== Helpers ====== */
    function getDeviceId(){
      const k='device_id_v1';
      let id=localStorage.getItem(k);
      if(!id){
        id=(crypto.randomUUID?crypto.randomUUID():(Math.random().toString(36).slice(2)+Date.now()));
        localStorage.setItem(k,id);
      }
      return id;
    }
    async function sha256Hex(str){
      const enc=new TextEncoder().encode(str);
      const buf=await crypto.subtle.digest('SHA-256',enc);
      return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
    }

    /* ====== LOGIN ====== */
    const KEYS_URL="https://raw.githubusercontent.com/quinhat12/ff-menu/main/keys.json";
    const REQUIRE_BOUND=true;

    async function login(){
      const key=document.getElementById("keyInput").value.trim();
      const status=document.getElementById("status");
      if(!key){status.textContent="‚ö†Ô∏è Vui l√≤ng nh·∫≠p key";status.style.color="orange";return;}

      try{
        const res=await fetch(KEYS_URL,{cache:"no-store"});
        if(!res.ok) throw new Error("Kh√¥ng t·∫£i ƒë∆∞·ª£c keys.json");
        const keys=await res.json();
        const info=keys[key];
        if(!info){status.textContent="‚ùå Key kh√¥ng t·ªìn t·∫°i";status.style.color="red";return;}

        const exp=info.expires?new Date(info.expires):null;
        if(exp && (new Date()>exp)){status.textContent="‚è≥ Key ƒë√£ h·∫øt h·∫°n";status.style.color="red";return;}

        const deviceHash=await sha256Hex(getDeviceId());
        const bind=(info.bind||"").toLowerCase().trim();
        if(!bind){
          if(REQUIRE_BOUND){
            status.textContent="üîí Key ch∆∞a ƒë∆∞·ª£c g·∫Øn thi·∫øt b·ªã. G·ª≠i M√£ Thi·∫øt B·ªã cho Admin.";
            status.style.color="orange";return;
          }
        }else if(bind!==deviceHash){
          status.textContent="üõë Key ƒë√£ g·∫Øn v·ªõi thi·∫øt b·ªã kh√°c";
          status.style.color="red";return;
        }

        status.textContent=exp?`‚úÖ Key h·ª£p l·ªá (HSD: ${info.expires})`:"‚úÖ Key vƒ©nh vi·ªÖn";
        status.style.color="lime";
        setTimeout(()=>{window.location.href="panel.html"},600);
      }catch(e){
        console.error(e);
        status.textContent="üö´ L·ªói khi ki·ªÉm tra key";
        status.style.color="red";
      }
    }
  </script>
</body>
</html>
