<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OBITO IOS TEAM</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: black;
      color: white;
      overflow: hidden;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    .login-box {
      background: rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(0, 255, 100, 0.4);
      border-radius: 15px;
      padding: 20px;
      width: 100%;
      max-width: 400px;
      text-align: center;
      box-shadow: 0 0 25px rgba(0, 255, 100, 0.4);
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
    }

    .logo-box {
      width: 60px;
      height: 60px;
      border-radius: 15px;
      overflow: hidden;
      margin-right: 10px;
      box-shadow: 0 0 15px #00ff99;
    }

    .logo-box img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .header-text {
      text-align: left;
    }

    .header-text h1 {
      font-size: 20px;
      margin: 0;
      color: #fff;
    }

    .header-text p {
      margin: 0;
      font-size: 12px;
      color: #aaa;
    }

    h2 {
      margin-bottom: 15px;
    }

    input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      border: none;
      outline: none;
      background: #111;
      color: white;
    }

    button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      background: lime;
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #00ff99;
    }

    .note {
      margin-top: 15px;
      font-size: 12px;
      color: #bbb;
      text-align: left;
    }

    .note b {
      color: #00ff99;
    }

    /* ============ SHOP ADD-ON ============ */
    .ak-shop-fab{
      position:fixed; right:16px; bottom:16px;
      width:56px; height:56px; border:none; border-radius:50%;
      /* gi√°¬ª¬Ø background ri√É¬™ng √Ñ¬ë√°¬ª¬É kh√É¬¥ng b√°¬ª¬ã rule button:hover override */
      background: radial-gradient(circle at 30% 30%, #00ff99, #008844);
      color:#000; font-size:24px; font-weight:700;
      box-shadow: 0 0 16px rgba(0,255,153,.6), inset 0 0 8px rgba(0,255,153,.4);
      display:flex; align-items:center; justify-content:center;
      cursor:pointer; z-index:99999; transition:.2s;
    }
    .ak-shop-fab:hover{
      transform: scale(1.07);
      background: radial-gradient(circle at 30% 30%, #00ff99, #008844);
    }

    .ak-shop-panel{
      position:fixed; right:12px; bottom:84px; width:320px; max-width:calc(100vw - 24px);
      background: rgba(0,15,0,.96); color:#fff;
      border:1px solid rgba(0,255,153,.2); border-radius:16px;
      box-shadow: 0 10px 40px rgba(0,0,0,.6), 0 0 20px rgba(0,255,153,.15);
      transform: scale(.98) translateY(10px); opacity:0; pointer-events:none; transition:.2s; z-index:99999;
    }
    .ak-shop-panel.ak-open{ opacity:1; transform: scale(1) translateY(0); pointer-events:auto; }
    .ak-shop-head{
      display:flex; align-items:center; justify-content:space-between; padding:10px 12px;
      border-bottom:1px solid rgba(0,255,153,.15);
    }
    .ak-shop-title{ font-weight:700; }
    .ak-shop-close{ background:transparent; color:#fff; border:none; font-size:18px; cursor:pointer; padding:6px; border-radius:8px; }
    .ak-shop-close:hover{ background:rgba(255,255,255,.06); }

    .ak-shop-body{ padding:10px 12px 6px; max-height:60vh; overflow:auto; }
    .ak-shop-row{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom:10px; }
    .ak-chip{
      background:transparent; color:#fff; padding:8px 12px; border-radius:14px;
      border:1px dashed rgba(0,255,153,.5); cursor:pointer; font-size:14px;
    }
    .ak-chip:hover{ background:rgba(0,255,153,.08); }

    .ak-shop-card{
      margin:10px 0; padding:10px 12px; background:rgba(0,0,0,.4);
      border:1px solid rgba(0,255,153,.15); border-radius:12px;
    }
    .ak-shop-card h4{ margin:0 0 6px; font-size:14px; color:#a6ffd6; }
    .ak-shop-card ul{ margin:6px 0 0 18px; padding:0; }
    .ak-shop-links{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
    .ak-shop-links a{
      text-decoration:none; padding:8px 12px; border-radius:10px;
      border:1px solid rgba(0,255,153,.5); background:rgba(0,255,153,.15); color:#fff; flex:1; text-align:center;
    }
    /* ========== /SHOP ADD-ON CSS ========== */
  </style>
</head>
<body>
  <canvas id="particles"></canvas>

  <div class="container">
    <div class="login-box">
      <div class="header">
        <div class="logo-box">
          <img src="Logo.jpg" alt="Logo">
        </div>
        <div class="header-text">
          <h1>OBITO IOS TEAM</h1>
          <p>An To√†n ‚Ä¢ Uy T√≠n ‚Ä¢ Ch·∫•t L∆∞·ª£ng</p>
        </div>
      </div>

      <h2>ƒêƒÉng nh·∫≠p key</h2>
      <p class="admin">ADMIN : NhismDev</p>

      <input id="keyInput" type="text" placeholder="Nh·∫≠p key c·ªßa b·∫°n...">
      <button onclick="login()">ƒêƒÉng Nh·∫≠p</button>
      <!-- √¢¬ú¬Ö K√°¬∫¬øt qu√°¬∫¬£ hi√°¬ª¬Én th√°¬ª¬ã √°¬ª¬ü √Ñ¬ë√É¬¢y -->
      <div id="status" style="margin-top:10px; font-size:14px; color:#fff;"></div>

      <div class="note">
  <p><b>Ghi ch√∫:</b></p>
  <p>Kh√¥ng chia s·∫ª key. H·ªá th·ªëng s·∫Ω kho√° khi ph√°t hi·ªán s·ª≠ d·ª•ng b·∫•t th∆∞·ªùng ho·∫∑c ph√°t t√°n c√¥ng khai.</p>
  <p>‚Ä¢ Ch·∫°m gi·ªØ v√†o √¥ nh·∫≠p ƒë·ªÉ d√°n key t·ª´ clipboard.</p>
  <p>B·∫±ng vi·ªác ƒëƒÉng nh·∫≠p b·∫°n ƒë·ªìng √Ω v·ªõi <b>ƒêi·ªÅu kho·∫£n</b> & <b>Ch√≠nh s√°ch b·∫£o m·∫≠t</b>.</p>
     </div>
    </div>
  </div>

  <!-- ===== SHOP ADD-ON (HTML) ===== -->
  <button id="akShopFab" class="ak-shop-fab" aria-label="Mua key" title="Mua key">√∞¬ü¬õ¬í</button>

  <div id="akShopPanel" class="ak-shop-panel" aria-hidden="true" role="dialog">
    <div class="ak-shop-head">
      <div class="ak-shop-title">Mua KEY</div>
      <button class="ak-shop-close" id="akShopClose" aria-label="√Ñ¬ê√É¬≥ng">√¢¬ú¬ï</button>
    </div>
    <div class="ak-shop-body">
      <div class="ak-shop-row">
        <button class="ak-chip" id="akChipPricing">B·∫£ng Gi√°</button>
        <button class="ak-chip" id="akChipBuy">Mua key ngay</button>
      </div>
      <div id="akShopContent"></div>
    </div>
  </div>
  <!-- ===== /SHOP ADD-ON ===== -->

  <!-- ====== CHECK KEY: 1 key = 1 thi·∫øt b·ªã (JSON tƒ©nh) ====== -->
<script>
/* ===== C·∫§U H√åNH ===== */
const KEYS_URL = "https://raw.githubusercontent.com/quinhat12/ff-menu/main/keys.json"; // ƒë·ªïi n·∫øu repo kh√°c
const REQUIRE_BOUND = true; // b·∫Øt bu·ªôc key ƒë√£ bind thi·∫øt b·ªã

/* ===== Helpers ===== */
function getDeviceId(){
  const k='device_id_v1';
  let id=localStorage.getItem(k);
  if(!id){
    id=(crypto.randomUUID?crypto.randomUUID():(Math.random().toString(36).slice(2)+Date.now().toString(36)));
    localStorage.setItem(k,id);
  }
  return id;
}
async function sha256Hex(str){
  const enc=new TextEncoder().encode(str);
  const buf=await crypto.subtle.digest('SHA-256',enc);
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
}
// ∆Øu ti√™n UDID n·∫øu ƒë√£ l∆∞u, ch∆∞a c√≥ th√¨ fallback deviceId
function getBindingId(){
  return localStorage.getItem('ios_udid') || getDeviceId();
}
function setUDID(udid){
  if(!udid) return;
  localStorage.setItem('ios_udid', udid.trim());
}

/* ===== LOGIN (ƒë√£ fix) ===== */
async function login(){
  const status = document.getElementById('status');
  const raw    = (document.getElementById('keyInput').value||'').trim();

  if(!raw){
    if(status){ status.textContent=' Vui l√≤ng nh·∫≠p key'; status.style.color='orange'; }
    return;
  }

  // Ch·∫ø ƒë·ªô nh·∫≠p UDID: g√µ "udid:<UDID>" v√†o √¥ key ƒë·ªÉ l∆∞u UDID (1 l·∫ßn)
  if(raw.toLowerCase().startsWith('udid:')){
    const udid = raw.slice(5).trim();
    if(!udid){
      if(status){ status.textContent='Nh·∫≠p UDID sau "udid:" (vd: udid:0000-...)'; status.style.color='orange'; }
      return;
    }
    setUDID(udid);
    if(status){ status.textContent='ƒê√£ l∆∞u UDID. Gi·ªù nh·∫≠p KEY ƒë·ªÉ ƒëƒÉng nh·∫≠p.'; status.style.color='lime'; }
    return;
  }

  // ƒêƒÉng nh·∫≠p b·∫±ng KEY
  const key = raw;
  try{
    const res = await fetch(KEYS_URL, { cache:'no-store' });
    if(!res.ok) throw new Error('fetch keys.json failed');
    const keys = await res.json();

    const info = keys[key];
    if(!info){
      if(status){ status.textContent='‚ùå Key kh√¥ng t·ªìn t·∫°i'; status.style.color='red'; }
      return;
    }

    // H·∫°n d√πng
    const exp = info.expires ? new Date(info.expires) : null;
    if(exp && (new Date()>exp)){
      if(status){ status.textContent=`‚è≥ Key ƒë√£ h·∫øt h·∫°n (HSD: ${info.expires})`; status.style.color='red'; }
      return;
    }

    // 1 key = 1 thi·∫øt b·ªã
    const deviceHash = await sha256Hex(getBindingId());
    const bind = (info.bind||'').toLowerCase().trim();

    if(!bind){
      if(REQUIRE_BOUND){
        if(status){ status.textContent='Key ch∆∞a ƒë∆∞·ª£c k√≠ch ho·∫°t. G·ª≠i UDID cho Admin ƒë·ªÉ k√≠ch ho·∫°t.'; status.style.color='orange'; }
        return;
      }
    }else if(bind !== deviceHash){
      if(status){ status.textContent='Key ƒë√£ g·∫Øn v·ªõi thi·∫øt b·ªã kh√°c'; status.style.color='red'; }
      return;
    }

    // OK
    if(status){
      status.textContent = exp ? `‚úÖ Key h·ª£p l·ªá (HSD: ${info.expires})` : '‚úÖ Key vƒ©nh vi·ªÖn';
      status.style.color = 'lime';
    }
    setTimeout(()=>{ window.location.href='panel.html'; }, 600);

  }catch(e){
    console.error(e);
    if(status){ status.textContent='üö´ L·ªói khi ki·ªÉm tra key'; status.style.color='red'; }
  }
}

/* ===== SHOP (gi·ªØ nguy√™n UI, ch·ªâ fix text b·ªã l·ªói m√£ h√≥a) ===== */
const AK_SHOP_ADMIN_NAME   = 'Admin';
const AK_SHOP_DISCORD_LINK = 'https://discord.com/users/your-id';
const AK_SHOP_TICKET_LINK  = 'https://vncheat.com/ticket';

(function akShopInit(){
  const fab   = document.getElementById('akShopFab');
  const panel = document.getElementById('akShopPanel');
  const close = document.getElementById('akShopClose');
  const chipPricing = document.getElementById('akChipPricing');
  const chipBuy     = document.getElementById('akChipBuy');

  function toggle(open){
    const willOpen = typeof open === 'boolean' ? open : !panel.classList.contains('ak-open');
    panel.classList.toggle('ak-open', willOpen);
    if (willOpen) renderPricing();
  }
  function renderPricing(){
    const box = document.getElementById('akShopContent');
    box.innerHTML = `
      <div class="ak-shop-card">
        <h4>B·∫£ng gi√°</h4>
        <ul>
          <li>10.000 VNƒê ‚Äî 1 Ng√†y</li>
          <li>50.000 VNƒê ‚Äî 7 Ng√†y</li>
          <li>150.000 VNƒê ‚Äî 30 Ng√†y</li>
          <li>250.000 VNƒê ‚Äî Vƒ©nh vi·ªÖn</li>
        </ul>
      </div>
    `;
  }
  function renderBuy(){
    const box = document.getElementById('akShopContent');
    box.innerHTML = `
      <div class="ak-shop-card">
        <h4>Mua key ngay</h4>
        <div>Ch·ªçn m·ªôt trong c√°c c√°ch sau:</div>
        <div class="ak-shop-links" style="margin-top:8px;">
          <a href="${AK_SHOP_DISCORD_LINK}" target="_blank" rel="noopener">Inbox Admin Discord</a>
          <a href="${AK_SHOP_TICKET_LINK}"  target="_blank" rel="noopener">T·∫°o ticket trong VNCheat</a>
        </div>
        <div style="margin-top:8px; font-size:12px; opacity:.8;">Admin: <b>${AK_SHOP_ADMIN_NAME}</b></div>
      </div>
    `;
  }

  fab   && fab.addEventListener('click', () => toggle());
  close && close.addEventListener('click', () => toggle(false));
  chipPricing && chipPricing.addEventListener('click', renderPricing);
  chipBuy     && chipBuy.addEventListener('click', renderBuy);
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') toggle(false); });
})();
</script>
</body>
</html>
